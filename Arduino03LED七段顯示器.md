## 1. LED七段顯示器

![upgit_20250402_1743571094.png|591x267](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2025/04/upgit_20250402_1743571094.png)


七段顯示器依照電源連接方式可分為兩種：
- 共陰極（Common Cathode）（常見）  
	- 所有 LED 的接地端共用（接 GND）  
	- 要讓某一段 LED 發光，需對另一端 輸入高電位（HIGH）  
	- 輸入高電位 → 發光
- 共陽極（Common Anode）
	- 所有 LED 的正極接一起，連接電源（VCC）  
	- 要讓某段發光，需對另一端 輸入低電位（LOW）  
	- 輸入低電位 → 發光
![upgit_20250402_1743571268.png|737x216](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2025/04/upgit_20250402_1743571268.png)


為了容易操弄，我們會將每組數字代號，用陣列的方式儲存

![upgit_20250402_1743571412.png|551x361](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2025/04/upgit_20250402_1743571412.png)
![upgit_20250402_1743571492.png|551x346](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2025/04/upgit_20250402_1743571492.png)

假設要點亮【1】，我們需要點亮b、c的LED，編碼數字又會因為共陰極/共陽極而有所不同。

### 1.1. 使用 PORT 寄存器控制腳位輸出（比 `digitalWrite()` 更快）
為了簡化同時對數個接腳的操作，可以設計成，把某一群接腳的模式都設為【輸出】，或者同時某一群接腳的模式都設為【高/低店為】
URO R3的微控器ATmaga328來說，把街角分為3個IO port

|PORT|控制腳位範圍|
|---|---|
|B|D8 ~ D13|
|C|A0 ~ A5（模擬腳）|
|D|D0 ~ D7|

而這3組port也有他對應的register來設定他們的模式與輸入/輸出值

- DDR（Data Direction Register）資料方向暫存器
	- 用來設定腳位是 輸入 還是 輸出
	- 就像你平常用 pinMode(10, OUTPUT); 一樣，但這裡是直接寫入二進位控制。
	- 有三種：DDRB、DDRC、DDRD，對應「哪一組腳位」
		- DDRB：第 8~13 腳（PORTB）
		- DDRC：A0~A5 腳（PORTC）
		- DDRD：第 0~7 腳（PORTD）
-  PORT 暫存器：
	- 用來設定腳位輸出的電壓是 HIGH（高電位） 還是 LOW（低電位）
	- 與 DDR 配合使用 → 腳位必須先設為輸出，PORT 才能控制輸出電壓
```cpp
DDRB = B00000100;   // 將 D10 設為輸出
PORTB = B00000100;  // 將 D10 輸出 HIGH（點亮 LED）
```
- PIN 暫存器：
	- 用來「讀取」腳位的輸入狀態（即外面是否有訊號進來）
	- 常用於按鈕輸入、感測器讀取等
```cpp
if (PINB & B00000100) {
  // D10 腳位為 HIGH，就執行這段
}
```





































































































































































































































































































































































































































































































































































































































































































































































































































































